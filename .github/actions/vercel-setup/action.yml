name: "Vercel Setup"
description: "Install Vercel CLI and configure project settings"

inputs:
  vercel-token:
    description: "Vercel authentication token"
    required: true
  vercel-org-id:
    description: "Vercel organization ID"
    required: true
  vercel-project-id:
    description: "Vercel project ID"
    required: true

runs:
  using: "composite"
  steps:
    - name: Install Vercel CLI
      shell: bash
      run: |
        # Check if Vercel CLI is installed, install if not
        if ! command -v vercel &> /dev/null; then
          echo "Vercel CLI not found, installing..."
          npm install -g vercel@latest
        else
          echo "Vercel CLI already installed"
        fi

        # Output Vercel version
        echo "Vercel CLI version:"
        vercel --version

    - name: Prepare Vercel configuration
      shell: bash
      run: |
        # Initialize Vercel project configuration
        mkdir -p .vercel
        echo '{"orgId":"${{ inputs.vercel-org-id }}","projectId":"${{ inputs.vercel-project-id }}"}' > .vercel/project.json
        vercel pull --token=${{ inputs.vercel-token }}